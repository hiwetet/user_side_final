<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cafe Quest</title>
  <style>
      body {
     margin: 0;
           font-family: Cinzel Decorative serif, Cinzel, serif;
      background: #5c3d39);
       color: #3e2723;
   }

    .page {
      display: none;
      height: 100vh;
    }

    /* Login */
    #auth-page {
      display: flex;
      justify-content: center;
      align-items: center;
      background: #D3B69C);
      min-height: 100vh;
    }

    .auth-box {
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.25);
      width: 320px;
      text-align: center;
    }

    .auth-box h2 {
      margin-bottom: 20px;
    }

    .auth-box input {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-sizing: border-box;
    }

    .auth-box button {
      width: 100%;
      padding: 12px;
      background-color: #6d4c41;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }

    .auth-box button:hover {
      background-color: #4e342e;
    }
    .error-message {
      color: red;
      margin-top: 10px;
      font-size: 14px;
    }

    /* Home page */
       #home-page {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    header {
      display: flex;
      align-items: center;
      padding: 15px;
      margin-left: 90px;
    }

    header .logo-space img {
      width: 60px;
      height: 60px;
      border-radius: 10px;
      margin-right: 15px;
    }

    header h1 {
      font-size: 22px;
      margin: 0;
    }

   .content {
  flex: 1;
  overflow-y: auto;
  padding: 15px;
  margin-left: 90px;  /* <-- add this */
}



    .shop {
      display: flex;
      flex-direction: row;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      margin-bottom: 20px;
      overflow: hidden;
    }

    .shop img {
      width: 200px;
      height: 200px
      background: #d7ccc8;
      object-fit: cover;
    }

    .shop-info {
      width: 40%;
      padding: 10px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .shop-name {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .shop-info div {
      margin: 6px 0;
      padding: 6px;
      background: #efebe9;
      border-radius: 6px;
      text-align: center;
    }

    /* Bottom nav */
    /* Left fixed vertical menu */

    nav {
  position: fixed;
  left: 0;
  top: 0;
  height: 100vh;
  width: 80px;
  background-color: #a1887f;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  padding-top: 20px;
}

 .rating-form {
      display: grid;
      gap: 15px;
    }

    .rating-form label {
      font-weight: bold;
      margin-bottom: 5px;
      display: block;
    }

    .rating-form select,
    .rating-form textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-sizing: border-box;
    }

    .rating-form textarea {
      min-height: 100px;
      resize: vertical;
      font-family: Arial, sans-serif;
    }

    .submit-review-btn {
      background-color: #6d4c41;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
    }

    .submit-review-btn:hover {
      background-color: #4e342e;
    }

    .reviews-list {
      margin-top: 20px;
    }

    .review-item {
      background: #efebe9;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 15px;
    }

    .review-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .reviewer-name {
      font-weight: bold;
    }

    .review-date {
      color: #666;
      font-size: 12px;
    }

    .review-ratings {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      margin: 10px 0;
      font-size: 13px;
    }

    .review-text {
      margin-top: 10px;
      line-height: 1.5;
    }

nav div {
  text-align: center;
  color: #fff;
  font-size: 12px;
  margin-bottom: 20px;
}

nav img {
  width: 35px;
  height: 35px;
  object-fit: cover;
  border-radius: 6px;
  display: block;
  margin-bottom: 5px;
}

.logged-in-user {
  position: absolute;
  right: 20px;
  top: 20px;
  font-weight: bold;
  font-size: 16px;
}
.user-dropdown {
  position: absolute;
  right: 20px;
  top: 20px;
  font-size: 16px;
  cursor: pointer;
  user-select: none;
}

.user-dropdown span {
  font-weight: bold;
}

.dropdown-menu {
  position: absolute;
  right: 0;
  top: 28px;
  background: white;
  border: 1px solid #ccc;
  border-radius: 6px;
  padding: 8px 12px;
  display: none;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  cursor: pointer;
  width: 120px;
}

.dropdown-menu div:hover {
  background: #eee;
  border-radius: 4px;
}

  </style>
</head>
<body>

     <!-- Login Page -->
  <div id="auth-page" class="page" style="display: flex;">
    <div class="auth-box">
      <h2>Cafe Quest Login</h2>
      <input type="email" id="email" placeholder="Student Email" required>
      <input type="password" id="password" placeholder="Password" required>
      <button onclick="validateLogin()">Login</button>
    </div>
  </div>

 <!-- Home Page -->
 <div id="home-page" class="page">

  <header>
  <div class="logo-space">
    <img src="https://github.com/kmangoes/final_ver_provider_side/blob/main/src/main/resources/static/img/cafequest_logo.png?raw=true">
  </div>
  <h1>Cafe Quest</h1>

  <!-- ADD THIS -->
 <div class="user-dropdown" onclick="toggleDropdown()">
  <span id="logged-user"></span> ▼

  <div id="dropdown-menu" class="dropdown-menu">
    <div onclick="logout()">Logout</div>
  </div>
</div>
</header>


  <div class="content">

     <!-- SHOP 1 -->
    <div class="shop">
      <img src="https://i0.wp.com/33andelmcoffeehouse.com/wp-content/uploads/2024/08/Corner-of-33-Elm_2.jpg?ssl=1">
      <div class="shop-info">
        <h2>33 & Elm Coffee House</h2>
        <p>123 Highland Ave.</p>
      </div>
    </div>

    <div class="detail-card">
      <h2>Write a Review</h2>
      <form class="rating-form" onsubmit="submitReview(event, 'shop1')">
        <select id="study-rating-shop1"><option value="">Study-ability</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select>
        <select id="comfort-rating-shop1"><option value="">Comfort</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select>
        <select id="access-rating-shop1"><option value="">Accessibility</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select>
        <select id="coffee-rating-shop1"><option value="">Coffee Quality</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select>
        <textarea id="review-text-shop1" placeholder="Write your review..."></textarea>
        <button class="submit-review-btn">Submit</button>
      </form>
    </div>

    <div class="detail-card">
      <h2>Reviews</h2>
      <div id="reviews-container-shop1"></div>
    </div>

    <!-- SHOP 2 -->
    <div class="shop">
      <img src="https://s3-media0.fl.yelpcdn.com/bphoto/PA1pno4zoFsTHBvuShVePA/348s.jpg">
      <div class="shop-info">
        <h2>Tate Street Coffee House</h2>
        <p>456 Spring Garden St.</p>
      </div>
    </div>

    <div class="detail-card">
      <h2>Write a Review</h2>
      <form class="rating-form" onsubmit="submitReview(event, 'shop2')">
        <select id="study-rating-shop2"><option value="">Study-ability</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select>
        <select id="comfort-rating-shop2"><option value="">Comfort</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select>
        <select id="access-rating-shop2"><option value="">Accessibility</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select>
        <select id="coffee-rating-shop2"><option value="">Coffee Quality</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option></select>
        <textarea id="review-text-shop2" placeholder="Write your review..."></textarea>
        <button class="submit-review-btn">Submit</button>
      </form>
    </div>

    <div class="detail-card">
      <h2>Reviews</h2>
      <div id="reviews-container-shop2"></div>
    </div>

  </div>
</div>

<!-- LEFT NAV -->
<nav>
  <div><img src="https://i.pinimg.com/1200x/c3/41/6e/c3416efade9f62b399498e657113ddf7.jpg">Home</div>
  <div><img src="https://i.pinimg.com/736x/bb/86/e7/bb86e710bc7167e62f7982e4d04de5e2.jpg">My Events</div>
  <div><img src="https://i.pinimg.com/736x/71/4a/cf/714acfb1b90df376dfa9906c1e316c67.jpg">Me</div>
</nav>


<script>
  let loggedInUser = { name: "", email: "" };

function validateLogin() {
  const email = document.getElementById("email").value;

  if (!email.endsWith("@uncg.edu")) {
    alert("Use a UNCG email.");
    return;
  }

  loggedInUser.email = email;
  loggedInUser.name = email.split("@")[0];

  // ADD THIS LINE → show "Logged in as ___"
  document.getElementById("logged-user").textContent = "Logged in as " + loggedInUser.name;

  document.getElementById("auth-page").style.display = "none";
  document.getElementById("home-page").style.display = "block";
}

function toggleDropdown() {
  const menu = document.getElementById("dropdown-menu");
  menu.style.display = menu.style.display === "block" ? "none" : "block";
}

function logout() {
  // Hide dropdown
  document.getElementById("dropdown-menu").style.display = "none";

  // Return to login page
  document.getElementById("home-page").style.display = "none";
  document.getElementById("auth-page").style.display = "flex";

  // Clear user
  loggedInUser = { name: "", email: "" };
  document.getElementById("logged-user").textContent = "";
}

function submitReview(event, shopId) {
  event.preventDefault();

  const study = document.getElementById(`study-rating-${shopId}`).value;
  const comfort = document.getElementById(`comfort-rating-${shopId}`).value;
  const access = document.getElementById(`access-rating-${shopId}`).value;
  const coffee = document.getElementById(`coffee-rating-${shopId}`).value;
  const text = document.getElementById(`review-text-${shopId}`).value;

  const reviewObj = {
    user: loggedInUser.name,
    email: loggedInUser.email,
    study,
    comfort,
    access,
    coffee,
    text,
    date: new Date().toLocaleDateString()
  };

  // Load existing reviews or create empty array
  let allReviews = JSON.parse(localStorage.getItem(shopId)) || [];

  // Add new review
  allReviews.push(reviewObj);

  // Save back to localStorage
  localStorage.setItem(shopId, JSON.stringify(allReviews));

  // Re-render
  renderReviews(shopId);

  event.target.reset();
}

function renderReviews(shopId) {
  const container = document.getElementById(`reviews-container-${shopId}`);
  const allReviews = JSON.parse(localStorage.getItem(shopId)) || [];

  container.innerHTML = "";

  allReviews.forEach(r => {
    container.innerHTML += `
      <div class="review-item">
        <div class="review-header">
          <strong>${r.user}</strong>
          <span>${r.date}</span>
        </div>
        <div>${r.email}</div>
        <p><strong>Study:</strong> ${r.study} |
        <strong>Comfort:</strong> ${r.comfort} |
        <strong>Access:</strong> ${r.access} |
        <strong>Coffee:</strong> ${r.coffee}</p>
        <p>${r.text}</p>
      </div>
    `;
  });
}

window.onload = () => {
  renderReviews("shop1");
  renderReviews("shop2");
};

</script>

</body>
</html>
